---
layout: post
title: "[python] Generator delegation in Python"
description: " "
date: 2023-10-18
tags: [python]
comments: true
share: true
---

In Python, generators are a powerful tool for working with sequences of data. They allow us to lazily generate and process data on the fly, which can be more memory-efficient compared to creating and storing the entire sequence in memory.

One of the useful features of generators is the ability to delegate to another generator. This allows us to easily combine multiple generators and perform complex data transformations.

## Basics of Generators

Before we dive into generator delegation, let's quickly review the basics of generators in Python. 

To create a generator, we use a generator function. A generator function is defined like a regular function, but it uses the `yield` keyword instead of `return` to yield values one at a time.

Here's an example of a simple generator function that generates squares of numbers:

```python
def squares(n):
    for i in range(n):
        yield i ** 2
```

To use this generator function, we iterate over it using a loop or a list comprehension:

```python
for square in squares(5):
    print(square)
```

This will output:

```
0
1
4
9
16
```

## Generator Delegation

Generator delegation allows us to use one generator inside another generator. This is useful when we want to chain multiple generators together or perform complex data transformations.

To delegate to another generator, we use the `yield from` statement followed by the generator expression or function call.

Here's an example of generator delegation:

```python
def evens_and_odds(n):
    evens = (x for x in range(n) if x % 2 == 0)
    odds = (x for x in range(n) if x % 2 != 0)
    yield from evens
    yield from odds
```

In this example, we have a generator function called `evens_and_odds` that generates even and odd numbers up to `n`. The even numbers are generated by the `evens` generator expression, and the odd numbers are generated by the `odds` generator expression.

We then use `yield from` to delegate to these two generators. The `yield from evens` statement will yield all the values from the `evens` generator, and then continue with the next statement. Similarly, `yield from odds` will yield all the values from the `odds` generator.

We can use this generator function as follows:

```python
for number in evens_and_odds(10):
    print(number)
```

This will output:

```
0
2
4
6
8
1
3
5
7
9
```

As you can see, the even numbers are printed first, followed by the odd numbers.

## Conclusion

Generator delegation is a powerful feature in Python that allows us to easily combine and transform multiple generators. It simplifies complex data processing tasks by breaking them down into smaller generators that can be delegated to. Understanding and utilizing generator delegation can make our code more readable, efficient, and scalable.

References:
- [Python Generators](https://docs.python.org/3/tutorial/classes.html#generators)
- [PEP 380 -- Syntax for Delegating to a Subgenerator](https://www.python.org/dev/peps/pep-0380/)